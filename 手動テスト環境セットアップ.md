# RacePredictor 手動テスト環境セットアップ

## 🎯 既存のテスト方法を参考にした環境整備

既存のテストドキュメント（`MANUAL_TESTING_GUIDE.md`、`LOCAL_TESTING_REPORT.md`、`run_tests.sh`）を参考に、手動テストが実行できる環境を整備します。

## 📋 環境確認済み項目

### ✅ システム要件
- Python 3.11.7 ✅
- Node.js v22.18.0 ✅
- npm 10.9.3 ✅

### ✅ バックエンド環境
- 仮想環境（venv）存在確認 ✅
- 依存関係インストール済み ✅
  - FastAPI 0.104.1
  - Uvicorn 0.24.0
  - SQLAlchemy 2.0.23
  - その他全依存関係
- データベース接続確認済み ✅

### ✅ フロントエンド環境
- node_modules 存在確認 ✅
- 環境変数ファイル（.env.local）設定済み ✅
- 依存関係インストール済み ✅

## 🚀 手動テスト実行手順

### 方法1: 起動スクリプト使用（推奨）

```bash
# プロジェクトルートディレクトリで実行
# バックエンド起動
./start_backend.sh

# 別ターミナルでフロントエンド起動
./start_frontend.sh

# または一括起動
./start.sh
```

### 方法2: 手動起動

#### バックエンド起動
```bash
cd backend
source venv/bin/activate
python -m uvicorn app.main:app --reload --host 0.0.0.0 --port 8000
```

#### フロントエンド起動
```bash
cd frontend-react
npm run dev
```

## 🧪 基本機能テスト（既存ガイドより）

### 1. ユーザー登録・ログイン

**テスト手順:**
1. `http://localhost:3000` にアクセス
2. 「新規登録」をクリック
3. テスト情報を入力:
   ```
   メールアドレス: test@example.com
   パスワード: TestPassword123!
   確認パスワード: TestPassword123!
   ```
4. 「登録」ボタンをクリック

**期待する動作:**
- ✅ 登録成功メッセージが表示
- ✅ 自動的にログイン状態になる
- ✅ ダッシュボードにリダイレクト

### 2. プロフィール設定

**テスト手順:**
1. ダッシュボードから「プロフィール設定」にアクセス
2. 基本情報を入力:
   ```
   年齢: 25
   性別: 男性
   身長: 170cm
   体重: 65kg
   安静時心拍数: 60bpm
   最大心拍数: 195bpm
   ```
3. 「保存」ボタンをクリック

### 3. 練習記録作成

**テスト手順:**
1. 「練習記録」ページにアクセス
2. 「新規作成」をクリック
3. 練習情報を入力:
   ```
   日付: 今日の日付
   部練習数: 1部練
   セッション1:
     - ウォームアップ: 10分ジョギング
     - メイン練習: 1000m×5本（レスト3分）
     - クールダウン: 10分ジョギング
   天候: 晴れ
   気温: 20℃
   メモ: テスト練習
   ```
4. 「保存」ボタンをクリック

### 4. レース結果登録

**テスト手順:**
1. 「レース結果」ページにアクセス
2. 「新規作成」をクリック
3. レース情報を入力:
   ```
   大会名: テストマラソン大会
   日付: 2024-02-15
   場所: 東京
   種目: フルマラソン
   記録: 3:30:00
   順位: 100位
   参加者数: 1000人
   天候: 晴れ
   気温: 15℃
   ```
4. 「保存」ボタンをクリック

### 5. CSVインポートテスト

**利用可能なテストファイル:**
- `test_workout_data.csv` - 練習記録用サンプルデータ
- `test_race_data.csv` - レース結果用サンプルデータ
- `activity_20370061025.csv` - Garmin Connect形式データ
- `test_sample_data.csv` - 基本練習データ

**テスト手順:**
1. 「練習記録」→「CSVインポート」をクリック
2. テストファイルを選択
3. プレビューを確認
4. インポート設定を入力
5. 「インポート実行」をクリック

## 🎨 UI/UXテスト

### レスポンシブデザイン確認
- デスクトップ表示（1200px以上）
- タブレット表示（768px-1199px）
- スマートフォン表示（767px以下）

### フォーム入力・バリデーション
- 無効なデータ入力テスト
- 必須項目のバリデーション
- エラーメッセージの表示確認

## 📊 アクセス先

- **フロントエンド:** http://localhost:3000
- **バックエンドAPI:** http://localhost:8000
- **API ドキュメント:** http://localhost:8000/docs
- **ヘルスチェック:** http://localhost:8000/health

## 🚨 トラブルシューティング

### よくある問題と解決方法

#### 1. バックエンドが起動しない
```bash
# 既存プロセスを確認
lsof -i :8000

# プロセスを停止
pkill -f uvicorn

# 再起動
./start_backend.sh
```

#### 2. フロントエンドが起動しない
```bash
# 既存プロセスを確認
lsof -i :3000

# プロセスを停止
pkill -f next

# 再起動
./start_frontend.sh
```

#### 3. データベース接続エラー
```bash
cd backend
source venv/bin/activate
python -c "from app.core.database import engine; print('DB接続OK')"
```

## 📝 テスト結果記録

### テストチェックリスト
- [ ] ユーザー登録・ログイン
- [ ] プロフィール設定
- [ ] 練習記録作成・編集・削除
- [ ] レース結果登録・編集・削除
- [ ] CSVインポート（練習データ）
- [ ] CSVインポート（レースデータ）
- [ ] レスポンシブデザイン確認
- [ ] フォームバリデーション
- [ ] エラーハンドリング

### 発見した問題
1. [問題の詳細]
2. [問題の詳細]

### 改善提案
1. [改善提案]
2. [改善提案]

## 🛑 停止方法

```bash
# 全サーバー停止
./stop.sh

# または個別停止
# バックエンド: Ctrl+C
# フロントエンド: Ctrl+C
```

---

**参考資料:**
- `MANUAL_TESTING_GUIDE.md` - 詳細な手動テストガイド
- `LOCAL_TESTING_REPORT.md` - ローカル環境テストレポート
- `run_tests.sh` - 自動テスト実行スクリプト
- `combined_test_instructions.md` - 包括テスト指示書

**作成日:** 2024年12月19日  
**対象バージョン:** RacePredictor v2.1  
**テスト環境:** WSL Ubuntu 22.04
